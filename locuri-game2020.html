<!DOCTYPE html>
<html>
<!-- 
author: Marius Buliga, 2020

https://mbuliga.github.io/locuri-game2020.html

last version 29.06.2020
-->

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="https://mbuliga.github.io/quinegraphs/css/icequine-on-white.css">
</head>

<body>

<h3 style="text-align: center; font-size: x-large; background-color: blue; color: white;   padding: 5%;" 
onclick="location.reload();"> la ce liceu intri la real in Bucuresti? </h3>
<br><br><br>

<label>clasament candidat:</label>
<input type="number" id="nrcandicat" placeholder="1000"><br><br>
<label>nr simulari:</label>
<input type="number" id="nrincercari" placeholder="10000"><br><br>
<label>probabilitatea ca un candidat sa aleaga la intamplare (0-100):</label>
<input type="number" id="probaintamplare" placeholder="10"><br><br>
<label>dintre cele mai bune</label> 
<input type="number" id="liceumin" placeholder="40"><br><br> de licee, din lista celor care au clase de matematica-informatica sau stiinte, la care in 2019 s-a intrat cu medie de peste 7,50 (la una din clase).<br><br>
<input type="submit" value="Submit" onclick="faTreaba();" ><br><br>

<p id="tabel"></p>

<br>
Ai sansa sa intri la orice liceu care se afla pe lista, dintre cele la care ai un numar pozitiv pe ultima coloana. <br><br> Atentie, modelul matematic descris mai jos nu poate garanta rezultatul real, care poate fi cunoscut numai dupa repartitia elevilor la licee.<br><br>
<p>Aceste sanse se calculeaza pe baza urmatorului model matematic: pentru candidatul clasat pe pozitia N, se fac S simulari ale alegerilor canditatilor de la 0 la N-1. La fiecare simulare, fiecare din acesti candidati alege fie un liceu la intamplare din lista primelor L licee, fie alege primul loc disponibil la un liceu, in ordinea clasarii liceelor, cu o probabilitate P/100, unde P este numarul intre 0-100. La fiecare simulare candidatul clasat pe pozitia N alege liceul cel mai bun cu profilul "real", adica matematica-informatica sau stiinte. Dupa cele S simulari (de exemplu S=10000) asa zisa probabilitate de a intra la liceu este egala cu numarul de alegeri facute in timpul simularilor de catre candidatul N, impartita la S si inmultita cu 100, daca aceasta e diferita de 0, sau egala cu 100 pentru fiecare liceu clasat mai jos de liceul cu probabilitate pozitiva.
</p>








<script>



var tabel0 = "<table style=\"padding: 20px; marginbottom: 18px; width:100%; border:0\">\n  <tr>\n  <th style=\"textalign: left;\">liceu</th>\n  <th style=\"textalign: left;\">nr. locuri</th>\n  <th style=\"textalign: left;\">locuri mateinfo</th>\n  <th style=\"textalign: left;\">nota mateinfo</th>\n  <th style=\"textalign: left;\">locuri stiinte</th>\n  <th style=\"textalign: left;\">nota stiinte</th>\n  <th style=\"textalign: left;\">alegere generala</th>\n  <th style=\"textalign: left;\">alegere real</th>\n</tr>";

var tabel1 = "</table>";

var tabel = "";

var clasa = [ 
 {nume:"SFANTUL SAVA", locuri:252, cod :[101,103], mateinfo:140,  stiinte:56, mateinfonota:9.69, stiintenota:9.85, sum:252, summate:140, summatestiinte:196},
 {nume:"GHEORGHE LAZAR", locuri:252, cod :[311,312], mateinfo:84, stiinte:84, mateinfonota:9.80, stiintenota:9.73, sum:504, summate:224, summatestiinte:364},           
 {nume:"TUDOR VIANU", locuri:252, cod :[115,116], mateinfo:224, stiinte:0, mateinfonota:9.59, stiintenota:0, sum:756, summate:448, summatestiinte:588},
 {nume:"SPIRU HARET", locuri:224, cod :[191,193], mateinfo:56, stiinte:56, mateinfonota:9.60, stiintenota:9.52, sum:980, summate:504, summatestiinte:700},
 {nume:"GHEORGHE SINCAI", locuri:224, cod :[289,290], mateinfo:140, stiinte:56, mateinfonota:9.51, stiintenota:9.49, sum:1204, summate:644, summatestiinte:896},
 {nume:"MIHAI VITEAZUL", locuri:280, cod :[180,181], mateinfo:224, stiinte:56, mateinfonota:9.42, stiintenota:9.49,  sum:1484, summate:868, summatestiinte:1176},
 {nume:"GRIGORE MOISIL", locuri:168, cod :[345,346], mateinfo:84, stiinte:28, mateinfonota:9.41, stiintenota:9.35, sum:1652, summate:0, summatestiinte:1288},       // bun
 {nume:"MATEI BASARAB", locuri:224, cod :[243,244], mateinfo:112, stiinte:56, mateinfonota:9.29, stiintenota:9.26, sum:1876, summate:0, summatestiinte:1456},
 {nume:"IULIA HASDEU", locuri:252, cod :[185,187], mateinfo:84, stiinte:28, mateinfonota:9.23, stiintenota:9.23, sum:2410, summate:0, summatestiinte:1568},
 {nume:"NICOLAE IORGA", locuri:168, cod :[136,138], mateinfo:28, stiinte:28, mateinfonota:9.22, stiintenota:9.12, sum:2578, summate:0, summatestiinte:1624},
 {nume:"I. L. CARAGIALE", locuri:280, cod :[105,109],  mateinfo:84, stiinte:28, mateinfonota:9.21, stiintenota:0, sum:2156, summate:0, summatestiinte:1736},
 {nume:"ION CREANGA", locuri:224, cod :[292,294], mateinfo:56, stiinte:56, mateinfonota:9.19, stiintenota:9.10, sum:2802, summate:0, summatestiinte:1848},
 {nume:"CANTEMIR VODA", locuri:196, cod :[182,184],  mateinfo:112, stiinte:56, mateinfonota:9.18, stiintenota:9.23, sum:2998, summate:0, summatestiinte:2016},
 {nume:"MIHAI EMINESCU", locuri:224, cod :[285,286], mateinfo:112, stiinte:28, mateinfonota:8.91, stiintenota:8.99, sum:3418, summate:0, summatestiinte:2156},     //
 {nume:"GEORGE CALINESCU", locuri:168, cod :[164], mateinfo:84, stiinte:0, mateinfonota:8.55, stiintenota:0, sum:4594, summate:0, summatestiinte:2240},
 {nume:"ION NECULCE", locuri:196, cod :[123,124], mateinfo:84, stiinte:28, mateinfonota:8.87, stiintenota:8.92, sum:3614, summate:0, summatestiinte:2352},
 {nume:"SCOALA CENTRALA", locuri:196, cod :[198], mateinfo:56, stiinte:0, mateinfonota:8.87, stiintenota:0, sum:3810, summate:0, summatestiinte:2408}, 
 {nume:"ALEXANDRU IOAN CUZA", locuri:196, cod :[247,248], mateinfo:112, stiinte:28, mateinfonota:8.96, stiintenota:9.00, sum:3194, summate:0, summatestiinte:2548},  // TITAN
 {nume:"C.A. ROSETTI", locuri:196, cod :[216,217], mateinfo:84, stiinte:84, mateinfonota:8.62, stiintenota:8.56, sum:4426, summate:0, summatestiinte:2716},  // in Tei
 {nume:"JEAN MONNET", locuri:140, cod :[129,130], mateinfo:56, stiinte:28, mateinfonota:8.78, stiintenota:8.70, sum:3950, summate:0, summatestiinte:2800},
 {nume:"TUDOR VLADIMIRESCU", locuri:140, cod :[353,354], mateinfo:28, stiinte:28, mateinfonota:8.43, stiintenota:8.28, sum:4118, summate:0, summatestiinte:2856},
 {nume:"MIGUEL DE CERVANTES", locuri:112, cod :[145], mateinfo:28, stiinte:0, mateinfonota:8.76, stiintenota:0, sum:4846, summate:0, summatestiinte:2884}, 
 {nume:"EMIL RACOVITA", locuri:56, cod :[202], mateinfo:28, stiinte:0, mateinfonota:8.46, stiintenota:0, sum:4846, summate:0, summatestiinte:2912},
 {nume:"ION BARBU", locuri:168, cod :[315,316], mateinfo:56, stiinte:56, mateinfonota:8.75, stiintenota:8.64, sum:4118, summate:0, summatestiinte:3052},      // 13 septembrie
 {nume:"STEFAN ODOBLEJA", locuri:168, cod :[322,323], mateinfo:84, stiinte:28, mateinfonota:8.13, stiintenota:8.31, sum:4118, summate:0, summatestiinte:3164},      // 13 septembrie
 {nume:"DANTE ALIGHIERI", locuri:196, cod :[250,252], mateinfo:56, stiinte:28, mateinfonota:8.53, stiintenota:8.51, sum:4790, summate:0, summatestiinte:3248},   // pe la parcul IOR
 {nume:"AUREL VLAICU", locuri:140, cod :[117,118], mateinfo:56, stiinte:28, mateinfonota:7.69, stiintenota:7.97, sum:4846, summate:0, summatestiinte:3332},
 {nume:"CONSTANTIN BRANCOVEANU", locuri:196, cod :[132,133], mateinfo:28, stiinte:56, mateinfonota:7.69, stiintenota:7.29, sum:4846, summate:0, summatestiinte:3416},
 {nume:"MIHAIL SADOVEANU", locuri:196, cod :[213], mateinfo:84, stiinte:0, mateinfonota:7.83, stiintenota:0, sum:4846, summate:0, summatestiinte:3500},
 {nume:"OCTAV ONICESCU", locuri:196, cod :[297], mateinfo:84, stiinte:0, mateinfonota:7.91, stiintenota:0, sum:4846, summate:0, summatestiinte:3584},
 {nume:"ADVENTIST STEFAN DEMETRESCU", locuri:56, cod :[301], mateinfo:28, stiinte:0, mateinfonota:8.39, stiintenota:0, sum:4846, summate:0, summatestiinte:2940},
 {nume:"ELENA CUZA", locuri:112, cod :[342],  mateinfo:56, stiinte:0, mateinfonota:8.94, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},                // e in drumul taberei!
 {nume:"GEORGE COSBUC", locuri:168, cod:[0],  mateinfo:84, stiinte:0, mateinfonota:8.96, stiintenota:0, sum:4230, summate:0, summatestiinte:3640}, 
 {nume:"GOETHE", locuri:106, cod:[0],  mateinfo:78, stiinte:0, mateinfonota:8.60, stiintenota:0, sum:4230, summate:0, summatestiinte:3640}, 
 {nume:"ALEXANDRU VLAHUTA", locuri:84, cod:[0],  mateinfo:0, stiinte:0, mateinfonota:7.73, stiintenota:0, sum:4230, summate:0, summatestiinte:3640}, 
 {nume:"ECONOMIC MADGEARU", locuri:280, cod:[0],  mateinfo:0, stiinte:0, mateinfonota:8.34, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
 {nume:"VICTOR BABES", locuri:196, cod:[204,205],  mateinfo:28, stiinte:112, mateinfonota:8.35, stiintenota:7.78, sum:4230, summate:0, summatestiinte:3640},
 {nume:"LUCIAN BLAGA", locuri:168, cod:[209,210],  mateinfo:28, stiinte:56, mateinfonota:7.55, stiintenota:7.30, sum:4230, summate:0, summatestiinte:3640},
 {nume:"ECONOMIC XENOPOL", locuri:224, cod:[0],  mateinfo:0, stiinte:0, mateinfonota:7.78, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
 {nume:"ECONOMIC HERMES", locuri:224, cod:[0],  mateinfo:0, stiinte:0, mateinfonota:7.51, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
 {nume:"BENJAMIN FRANKLIN", locuri:168, cod:[256,257],  mateinfo:56, stiinte:56, mateinfonota:7.63, stiintenota:7.68, sum:4230, summate:0, summatestiinte:3640},
 {nume:"ECONOMIC KRETZULESCU", locuri:196, cod:[0],  mateinfo:0, stiinte:0, mateinfonota:8.10, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
 {nume:"CATOLIC SF. IOSIF", locuri:28, cod:[300],  mateinfo:0, stiinte:28, mateinfonota:0, stiintenota:8.00, sum:4230, summate:0, summatestiinte:3640},
 {nume:"MARIN PREDA", locuri:140, cod:[349,350],  mateinfo:28, stiinte:28, mateinfonota:7.78, stiintenota:7.74, sum:4230, summate:0, summatestiinte:3640},
 {nume:"EUGEN LOVINESCU", locuri:140, cod:[357],  mateinfo:84, stiinte:0, mateinfonota:8.03, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
 {nume:"TEHNIC PETRU MAIOR", locuri:168, cod:[367],  mateinfo:28, stiinte:0, mateinfonota:7.50, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
 {nume:"ECONOMIC KIRITESCU", locuri:168, cod:[0],  mateinfo:0, stiinte:0, mateinfonota:7.57, stiintenota:0, sum:4230, summate:0, summatestiinte:3640},
];

//clasa.sort(compareMate);
//clasa.sort(compareStiinte);




clasa.sort(compare);

var ordClasa = clone(clasa);

// ordClasa.sort(compareMate);
// ordClasa.sort(compareStiinte);



//ordClasa.sort(compareMate);

var inda = 0, indb = 0;


for (var i=0; i<ordClasa.length; i++) {
  inda += ordClasa[i].locuri;
  indb += ordClasa[i].mateinfo + ordClasa[i].stiinte;
  ordClasa[i].sum = inda;
  ordClasa[i].summatestiinte = indb;
}

//printTabel(ordClasa);


function faTreaba() {

var essay = Math.floor(document.getElementById("nrincercari").value);
if (essay < 1) {
document.getElementById("nrincercari").value = 1;
essay = 1;
}

var candidate = Math.floor(document.getElementById("nrcandicat").value);
if (candidate < 1) {
document.getElementById("nrcandidat").value = 1;
candidate = 1;
}

var proportion = Math.floor(document.getElementById("probaintamplare").value);
if (proportion < 0) {
document.getElementById("probaintamplare").value = 0;
proportion = 0;
}
if (proportion > 100) {
document.getElementById("probaintamplare").value = 100;
proportion = 100;
}

proportion = proportion / 100;

var liceeLa = Math.floor(document.getElementById("liceumin").value);
if (liceeLa < 0) {
document.getElementById("liceumin").value = 20;
liceeLa = 20;
}
if (proportion > ordClasa.length) {
document.getElementById("liceumin").value = ordClasa.length;
liceeLa = ordClasa.length;
}


var randomChoice = 0, randomC = 0, occupy = 1;
var ka, ko;

var liceeLength = ordClasa.length;
var counter = 0;

var proba = [], probab = [];
for (var lic=0; lic<liceeLength; lic++) {
proba.push(0);
probab.push(0);
}


var ordClasaE = [];

for (var i=0; i<essay; i++) {
  ordClasaE = clone(ordClasa);
  for (var j=0; j<candidate; j++) {
    randomChoice = Math.random();
    if (randomChoice < proportion) {
      occupy = 1;
      counter = 0;
      while (occupy > 0 && counter < ordClasa[liceeLa].sum) {
//      randomC = Math.floor(Math.random() * liceeLength);
        randomC = Math.floor(Math.random() * liceeLa);
        if (ordClasaE[randomC].locuri > 0) {
          ordClasaE[randomC].locuri = ordClasaE[randomC].locuri - 1;
          occupy = 0;
          probab[randomC] = probab[randomC] - 1;
        }
      }
    } else {
      for (ka=0; ka<liceeLength; ka++) {
        if (ordClasaE[ka].locuri > 0) {
          ordClasaE[ka].locuri = ordClasaE[ka].locuri - 1;
          probab[ka] = probab[ka] - 1;
          break;
        }
      }
    }
    counter +=1;
  }
  for (ka=0; ka<liceeLength; ka++) {
      ko = ordClasaE[ka].mateinfo + ordClasaE[ka].stiinte + ordClasaE[ka].locuri;
      if (ordClasa[ka].locuri < ko) {
        proba[ka] +=1;
        break;
      }
  }
}

var kiki = 0;
var deaici = 0;
for (ka=0; ka<liceeLength; ka++) {
  if (proba[ka] > 0 || deaici == 1) {
    kiki = (proba[ka] / essay) * 100;
    deaici=1;
    } else {
//    kiki = probab[ka] / essay;
    kiki = 0;      
  }
  if (kiki == 0 && deaici == 1) {kiki = 100;}
  ordClasa[ka].summatestiinte = kiki;
}

printTabel(ordClasa);

}


function printTabel(gugu) {
  var output = tabel0;
  for (var i=0; i<gugu.length; i++) {
    output += linie(gugu[i]);
  }
  output += tabel1;

  document.getElementById("tabel").innerHTML = output;
}

function linie(obi) {

  var lini = "<tr>\n<td>";
  lini += obi.nume + "</td><td>" + obi.locuri + "</td><td>" + obi.mateinfo + "</td><td>" + obi.mateinfonota + "</td><td>" + obi.stiinte + "</td><td>" + obi.stiintenota + "</td><td>" + obi.sum + "</td><td>" + obi.summatestiinte + "</td></tr>";

  return lini;
  

}


function minim(a,b) {
  var output;
  var ma = 0 + a;
  var mb = 0 + b;
  if (ma==0) ma=100;
  if (mb==0) mb=100;
  if (ma <= mb) {
      output = ma;
    } else {
      output = mb;
    } 
  return output;
}


function compare(a,b) {

  var bandAmate = 0 + a.mateinfonota;
  var bandBmate = 0 + b.mateinfonota;
  var bandAstiinte = 0 + a.stiintenota;
  var bandBstiinte = 0 + b.stiintenota;

  var bandA = minim(bandAmate,bandAstiinte);
  var bandB = minim(bandBmate,bandBstiinte);

  let comparison = 0;
  if (bandA > bandB) {
    comparison = -1;
  } else if (bandA < bandB) {
    comparison = 1;
  }
  return comparison;

}


function compareStiinte(a, b) {
  var bandA = 0 + a.stiintenota;
  var bandB = 0 + b.stiintenota;

  let comparison = 0;
  if (bandA > bandB) {
    comparison = -1;
  } else if (bandA < bandB) {
    comparison = 1;
  }
  return comparison;
}


function compareMate(a, b) {
  var bandA = 0 + a.mateinfonota;
  var bandB = 0 + b.mateinfonota;

  let comparison = 0;
  if (bandA > bandB) {
    comparison = -1;
  } else if (bandA < bandB) {
    comparison = 1;
  }
  return comparison;
}



function clone(obj) {
    var copy;

    // Handle the 3 simple types, and null or undefined
    if (null == obj || "object" != typeof obj) return obj;

    // Handle Date
    if (obj instanceof Date) {
        copy = new Date();
        copy.setTime(obj.getTime());
        return copy;
    }

    // Handle Array
    if (obj instanceof Array) {
        copy = [];
        for (var i = 0, len = obj.length; i < len; i++) {
            copy[i] = clone(obj[i]);
        }
        return copy;
    }

    // Handle Object
    if (obj instanceof Object) {
        copy = {};
        for (var attr in obj) {
            if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);
        }
        return copy;
    }

    throw new Error("Unable to copy obj! Its type isn't supported.");
}

</script>

</body>
</html>

